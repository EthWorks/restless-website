<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Restless</title>
	<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="./css/main.css">
</head>
<body>
	<header class="header">
		<div class="container">
			<div class="header__top">
				<img src="./img/restless.svg" alt="restless">
				<img src="./img/github.svg" alt="github">
			</div>
			<div class="hero">
				<img class="hero__img" src="./img/restless-text.svg" alt="restless">
				<p class="hero__subtitle">make TypeScript type <b>safe again</b></p>
			</div>
		</div>
	</header>
	<main>
		<section class="features">
			<div class="container">
				<h2 class="section-title">features</h2>
				<ul class="features-list">
					<li class="features-list__item">Syntax so easy that <b>your grandma will get it</b></li>
					<li class="features-list__item">Takes whatever returns what you need</li>
					<li class="features-list__item">First class <b>Express.js support</b></li>
					<li class="features-list__item"><b>Built in utilities</b> for Ethereum</li>
				</ul>
			</div>
		</section>
		<section class="examples">
			<div class="container">
				<h2 class="section-title">examples</h2>
				<ul class="examples-list">
					<li class="examples-list__item">
						<p class="small-title">This is the basic thing</p>
						<pre>
							<code class="javascript">
cast(123, asNumber) // returns 123 
cast('foo', asNumber) // throws error
							</code>
						</pre>
					</li>
					<li class="examples-list__item">
						<p class="small-title">But you can compose the <b>Sanitizers</b></p>
						<pre>
							<code class="javascript">
const asEmployee = asObject({
  name: asString,
  salary: asNumber,
  projects: asArray(asString),
})
const json = await get('https://myapi.com/employees/2137')
const myGuy = cast(json, asEmployee)
							</code>
						</pre>
					</li>
					<li class="examples-list__item">
						<p class="small-title">And use it with Express.js</p>
						<pre>
							<code class="javascript">
app.get('/foo/:n/:s', asyncHandler(
  sanitize({
    n: asNumber,
    s: asString
  }),
  // n and s will have compile time inferred types of number and string
  ({ n, s }) => responseOf(`You sent ${n} and "${s}"`)
))
							</code>
						</pre>
						<pre>
							<code class="plaintext">
GET /foo/42/answer -> 200: You sent 42 and "answer"
GET /foo/bar/answer -> 400: [{ path: 'params.n', expected: 'number' }]
							</code>
						</pre>
					</li>
					<li class="examples-list__item">
						<p class="small-title">Or with Ethereum</p>
						<pre>
							<code class="javascript">
cast('0xA5fE...f213', asEthAddress) // returns '0xA5fE...f213'
cast('whatever', asEthAddress) // throws error
							</code>
						</pre>
					</li>
				</ul>
			</div>
		</section>
		<section class="installation">
			<div class="container">
				<h2 class="installation__title section-title">installation</h2>
				<div class="installation__row">
					<div class="tabsn">
						<button class="js-tab-btn tabs__button js-installation-btn tabs__button--light active" data-name="installation" data-target="sanitizers">sanitizers</button>
						<button class="js-tab-btn tabs__button js-installation-btn tabs__button--light" data-name="installation" data-target="ethereum">ethereum</button>
						<button class="js-tab-btn tabs__button js-installation-btn tabs__button--light" data-name="installation" data-target="express">express.js</button>
					</div>
					<div class="package-managers">
						<button class="js-tab-btn package-managers__button js-package-btn active" data-name="package-managers" data-target="npm">npm</button>
						<button class="js-tab-btn package-managers__button js-package-btn" data-name="package-managers" data-target="yarn">yarn</button>
					</div>
				</div>
				<div class="hidden" data-id="ethereum" data-group="installation">
					<div class="hidden" data-group="package-managers" data-id="yarn">
						<pre class="installation__code">
							<code class="plaintext">
yarn add @restless/ethereum
							</code>
						</pre>
					</div>
					<div data-group="package-managers" data-id="npm">
						<pre class="installation__code">
							<code class="plaintext">
npm install @restless/ethereum
							</code>
						</pre>
					</div>
				</div>
				<div class="hidden" data-id="express" data-group="installation">
					<div class="hidden" data-group="package-managers" data-id="yarn">
						<pre class="installation__code">
							<code class="plaintext">
yarn add @restless/restless
							</code>
						</pre>
					</div>
					<div data-group="package-managers" data-id="npm">
						<pre class="installation__code">
							<code class="plaintext">
npm install @restless/restless
							</code>
						</pre>
					</div>
				</div>
				<div data-id="sanitizers" data-group="installation">
					<div class="hidden" data-group="package-managers" data-id="yarn">
						<pre class="installation__code">
							<code class="plaintext">
yarn add @restless/sanitizers
							</code>
						</pre>
					</div>
					<div data-group="package-managers" data-id="npm">
						<pre class="installation__code">
							<code class="plaintext">
npm install @restless/sanitizers
							</code>
						</pre>
					</div>
				</div>
			</div>
		</section>
		<section class="documentation">
			<div class="container">
				<h2 class="section-title">documentation</h2>
				<div class="tabs tabs--center">
					<button class="js-tab-btn tabs__button active" data-name="documentation" data-target="sanitizers-docs">sanitizers</button>
					<button class="js-tab-btn tabs__button" data-name="documentation" data-target="ethereum-docs">ethereum</button>
					<button class="js-tab-btn tabs__button" data-name="documentation" data-target="express-docs">express.js</button>
				</div>
				<div data-id="sanitizers-docs" data-group="documentation">
					<div class="documentation__row">
						<ul class="sidebar">
							<li class="sidebar__item">
								<button class="sidebar__button active">cast</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">castOr</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asString.js</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asNumber</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asInteger</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asBoolean</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asMatching</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asObject</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asArray</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asOptional</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asExactly</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asChecked</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asMapped</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asFlatMapped</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asAnyOf</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">withErrorMessage</button>
							</li>
						</ul>
						<div class="documentation__content">
							<div class="documentation__item">
								<p class="small-title">cast</p>
								<p class="documentation__text">Accepts a value and applies a sanitizer to it resulting in returning the sanitized value or throwing a TypeError. The third optional parameter is the custom error message, with which cast will be thrown.</p>
								<pre>
									<code class="plaintext">
cast('123', asNumber) // 123
cast('foo', asNumber) // TypeError
cast('foo', asNumber, 'My custom message') // throws error with custom message
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">castOr</p>
								<p class="documentation__text">Accepts a value and applies a sanitizer to it resulting in returning the sanitized value or throwing a TypeError. The third optional parameter is the custom error message, with which cast will be thrown.</p>
								<pre>
									<code class="plaintext">
cast('123', asNumber) // 123
cast('foo', asNumber) // TypeError
cast('foo', asNumber, 'My custom message') // throws error with custom message
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">asString.js</p>
								<p class="documentation__text">Accepts a value and applies a sanitizer to it resulting in returning the sanitized value or throwing a TypeError. The third optional parameter is the custom error message, with which cast will be thrown.</p>
								<pre>
									<code class="plaintext">
cast('123', asNumber) // 123
cast('foo', asNumber) // TypeError
cast('foo', asNumber, 'My custom message') // throws error with custom message
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">asString.js</p>
								<p class="documentation__text">Accepts a value and applies a sanitizer to it resulting in returning the sanitized value or throwing a TypeError. The third optional parameter is the custom error message, with which cast will be thrown.</p>
								<pre>
									<code class="plaintext">
cast('123', asNumber) // 123
cast('foo', asNumber) // TypeError
cast('foo', asNumber, 'My custom message') // throws error with custom message
									</code>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="hidden" data-id="ethereum-docs" data-group="documentation" >
					<div class="documentation__row">
						<ul class="sidebar">
							<li class="sidebar__item">
								<button class="sidebar__button active">asEthAddress</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asBigNumber</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asHexBytes</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">asTransactionHash</button>
							</li>
						</ul>
						<div class="documentation__content">
							<div class="documentation__item">
								<p class="small-title">asEthAddress</p>
								<p class="documentation__text">Accepts any string that represents a valid ethereum address. Checks the checksum if present. Returns a normalized representation.</p>
								<pre>
									<code class="plaintext">
	asEthAddress('0xA5fE...f213', 'path') // Result.ok(0xA5fE...f213)
	asEthAddress('0xa5fe...f213', 'path') // Result.ok(0xA5fE...f213)
	asEthAddress('bla bla bla', 'path') // Result.error([{expected: 'ethereum address', path: 'path'}])
	asEthAddress(123, 'path') // Result.error([{expected: 'ethereum address', path: 'path'}])
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">asBigNumber</p>
								<p class="documentation__text">Accepts any string or number that represents an integer. Converts the integer to a BigNumber.</p>
								<pre>
									<code class="plaintext">
	asBigNumber('123', 'path') // Result.ok(BigNumber(123))
	asBigNumber(456, 'path') // Result.ok(BigNumber(456))
	asBigNumber(1.5, 'path') // Result.error([{expected: 'big number', path: 'path'}])
	asBigNumber(true, 'path') // Result.error([{expected: 'big number', path: 'path'}])									
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">asHexBytes</p>
								<p class="documentation__text">Accepts any string that encodes binary data of specific length in hex format. The returned string is always lowercased.</p>
								<pre>
									<code class="plaintext">
	sanitizer('0x12ab56', 'path') // Result.ok('0x12ab56')
	sanitizer('0x12AB56', 'path') // Result.ok('0x12ab56')
	sanitizer('0x12AB5', 'path') // Result.error([{expected: 'hex string representing 3 bytes', path: 'path'}])
	sanitizer(1234, 'path') // Result.error([{expected: 'hex string representing 3 bytes', path: 'path'}])									
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">asTransactionHash</p>
								<p class="documentation__text">Accepts any string that can be a transaction hash.</p>
								<pre>
									<code class="plaintext">
	asTransactionHash(exampleHash, 'path') // Result.ok('0xd04b...40fa')
	asTransactionHash(exampleHash.toUpperCase(), 'path') // Result.ok('0xd04b...40fa')
	sanitizer('0x12AB5', 'path') // Result.error([{expected: 'transaction hash', path: 'path'}])
	sanitizer(1234, 'path') // Result.error([{expected: 'transaction hash', path: 'path'}])									
									</code>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="hidden" data-id="express-docs" data-group="documentation">
					<div class="documentation__row">
						<ul class="sidebar">
							<li class="sidebar__item">
								<button class="sidebar__button active">asyncHandler</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">responseOf</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">responseOfBuffer</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">sanitize</button>
							</li>
							<li class="sidebar__item">
								<button class="sidebar__button">SanitizeError</button>
							</li>
						</ul>
						<div class="documentation__content">
							<div class="documentation__item">
								<p class="small-title">asyncHandler</p>
								<p class="documentation__text">This function is essentially an async pipe. It takes a set of possibly async functions that are called with the return value of the previous function. It returns an express middleware that should be passed as a route handler to express.</p>
								<!-- TODO: Add full copy -->
								<pre>
									<code class="plaintext">
	import express from 'express'
	import { asyncHandler, responseOf } from '@restless/restless'
	
	const app = express()
	app.get('/:foo', asyncHandler(
		(_, request) => request.params.foo,
		(foo) => responseOf(`Param foo is: ${foo}`)
	))									
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">responseOf</p>
								<p class="documentation__text">Used to send json data:</p>
								<pre>
									<code class="plaintext">
	responseOf({ foo: 'bar' }) // default 200 status
	responseOf({ error: 'NOT_FOUND' }, 404) // custom status-code									
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">responseOfBuffer</p>
								<p class="documentation__text">Used to send binary data from Buffer, use the first argument to specify data type:</p>
								<pre>
									<code class="plaintext">
	responseOfBuffer('png', Buffer.from('ABC', 'ascii')) // default 200 status
	responseOfBuffer('jpeg', Buffer.from('ABC', 'ascii'), 404) // custom status-code									
									</code>
								</pre>
							</div>
							<div class="documentation__item">
								<p class="small-title">sanitize</p>
								<p class="documentation__text">The sanitize function is a transformer. It transforms the request into an object that matches a schema you provide.</p>
								<pre>
									<code class="plaintext">
	import express from 'express'
	import { asyncHandler, responseOf, sanitize } from '@restless/restless'
	import { asObject, asNumber } from '@restless/sanitizers'
	
	const app = express()
	app.get('/:foo', asyncHandler(
		sanitize({
			foo: asNumber,
			body: asObject({
				bar: asNumber
			}),
			query: asObject({
				baz: asNumber
			})
		})
		(data) => responseOf(data)
	))									
									</code>
								</pre>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
	<footer class="footer">
		<div class="container">
			<div class="footer__row">
				<p class="footer__text">Copyrights 2020.</p>
				<img src="./img/restless-logo.svg" alt="restless logo">
				<img src="./img/github-logo.svg" alt="github logo">
			</div>
		</div>
	</footer>

	<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/monokai-sublime.min.css">
	<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<script src="./js/main.js"></script>
</body>
</html>
